#!/bin/sh
# Validate branch name starts with a number (issue number)
# Example valid names: 123-feature-name, 42-fix-bug, 1-initial-setup

branch_name=$(git symbolic-ref --short HEAD 2>/dev/null)

# Skip validation for main, master, develop branches
if [ "$branch_name" = "main" ] || [ "$branch_name" = "master" ] || [ "$branch_name" = "develop" ] || [ "$branch_name" = "dev" ]; then
  exit 0
fi

# Check if branch name starts with a number (issue number)
if ! echo "$branch_name" | grep -qE '^[0-9]+'; then
  echo ""
  echo "❌ ERROR: Branch name must start with an issue number!"
  echo ""
  echo "Current branch: $branch_name"
  echo ""
  echo "Valid examples:"
  echo "  ✅ 123-feature-user-auth"
  echo "  ✅ 42-fix-login-bug"
  echo "  ✅ 1-initial-setup"
  echo ""
  echo "Invalid examples:"
  echo "  ❌ feature-user-auth"
  echo "  ❌ fix-login-bug"
  echo ""
  exit 1
fi

exit 0
